// Fontaine la Guyon
// Distance : 29.01 km
// Altitudes : Maxi 270 m  Mini 159 m
// Dénivelées : ~ +421 m  -421 m
// Durée : 1 heure 47 minutes
// Type de trace : Vtt  

// Plat au début puis des creux et des bosses ...
// Pour une fois, le dénivelé est correct par rapport à mon compteur.

// Load the Visualization API and the columnchart package.
google.load('visualization', '1', {packages: ['columnchart']});

function initMap() {
  // The following path marks a path from Mt. Whitney, the highest point in the
  // continental United States to Badwater, Death Valley, the lowest point.
  var path = 
[{lat: 48.46971300, lng:1.310873000},
{lat: 48.46952400, lng:1.310614000},
{lat: 48.46954300, lng:1.310324000},
{lat: 48.46929500, lng:1.309799000},
{lat: 48.46865200, lng:1.308269000},
{lat: 48.46826500, lng:1.307656000},
{lat: 48.46812900, lng:1.307666000},
{lat: 48.46780400, lng:1.307176000},
{lat: 48.46769300, lng:1.307023000},
{lat: 48.46754500, lng:1.306874000},
{lat: 48.46320900, lng:1.301468000},
{lat: 48.46274200, lng:1.300393000},
{lat: 48.46225700, lng:1.299178000},
{lat: 48.46172300, lng:1.297832000},
{lat: 48.46120200, lng:1.296652000},
{lat: 48.46058700, lng:1.295397000},
{lat: 48.45898800, lng:1.291361000},
{lat: 48.45981100, lng:1.290812000},
{lat: 48.46058600, lng:1.289993000},
{lat: 48.46124400, lng:1.289006000},
{lat: 48.46206500, lng:1.288012000},
{lat: 48.46555100, lng:1.281812000},
{lat: 48.46613700, lng:1.280536000},
{lat: 48.46666300, lng:1.279288000},
{lat: 48.46692500, lng:1.277962000},
{lat: 48.46742600, lng:1.276566000},
{lat: 48.46772100, lng:1.275108000},
{lat: 48.46800400, lng:1.274291000},
{lat: 48.46961900, lng:1.276997000},
{lat: 48.46958600, lng:1.276956000},
{lat: 48.46960800, lng:1.276975000},
{lat: 48.46969300, lng:1.276941000},
{lat: 48.47030500, lng:1.276647000},
{lat: 48.47118500, lng:1.276472000},
{lat: 48.47223100, lng:1.276621000},
{lat: 48.47233200, lng:1.276627000},
{lat: 48.47273700, lng:1.276523000},
{lat: 48.47357300, lng:1.276453000},
{lat: 48.47479400, lng:1.276185000},
{lat: 48.47516100, lng:1.276199000},
{lat: 48.47638600, lng:1.271551000},
{lat: 48.47661300, lng:1.270453000},
{lat: 48.47668400, lng:1.270478000},
{lat: 48.47725700, lng:1.271402000},
{lat: 48.47796400, lng:1.272519000},
{lat: 48.47859300, lng:1.273471000},
{lat: 48.47881800, lng:1.273718000},
{lat: 48.48225100, lng:1.278049000},
{lat: 48.48242700, lng:1.278610000},
{lat: 48.48266700, lng:1.278785000},
{lat: 48.48339000, lng:1.279082000},
{lat: 48.48424200, lng:1.279317000},
{lat: 48.48499400, lng:1.279252000},
{lat: 48.49173900, lng:1.285149000},
{lat: 48.49189100, lng:1.285129000},
{lat: 48.49240200, lng:1.285075000},
{lat: 48.49283400, lng:1.285137000},
{lat: 48.49310200, lng:1.285423000},
{lat: 48.49344900, lng:1.286128000},
{lat: 48.49392100, lng:1.287132000},
{lat: 48.49485500, lng:1.287857000},
{lat: 48.49509800, lng:1.288223000},
{lat: 48.49524800, lng:1.288633000},
{lat: 48.49514300, lng:1.289066000},
{lat: 48.49514500, lng:1.289126000},
{lat: 48.49532300, lng:1.289608000},
{lat: 48.49545200, lng:1.289726000},
{lat: 48.49550300, lng:1.289752000},
{lat: 48.49564000, lng:1.289708000},
{lat: 48.49739200, lng:1.289089000},
{lat: 48.49762500, lng:1.289215000},
{lat: 48.49798600, lng:1.289149000},
{lat: 48.49850300, lng:1.289038000},
{lat: 48.49860600, lng:1.288990000},
{lat: 48.49889800, lng:1.288804000},
{lat: 48.49887100, lng:1.288318000},
{lat: 48.49873900, lng:1.286971000},
{lat: 48.49882300, lng:1.286373000},
{lat: 48.49891800, lng:1.285762000},
{lat: 48.49897500, lng:1.285332000},
{lat: 48.49912000, lng:1.284550000},
{lat: 48.49912500, lng:1.284374000},
{lat: 48.49906400, lng:1.284013000},
{lat: 48.49894800, lng:1.283689000},
{lat: 48.49712700, lng:1.279755000},
{lat: 48.49630100, lng:1.279796000},
{lat: 48.49597500, lng:1.279826000},
{lat: 48.49577500, lng:1.279797000},
{lat: 48.49552000, lng:1.279747000},
{lat: 48.49495100, lng:1.279594000},
{lat: 48.49281600, lng:1.278789000},
{lat: 48.49255400, lng:1.278912000},
{lat: 48.49235200, lng:1.279199000},
{lat: 48.49218900, lng:1.279488000},
{lat: 48.49211300, lng:1.279819000},
{lat: 48.49208700, lng:1.280001000},
{lat: 48.49199800, lng:1.280221000},
{lat: 48.49184900, lng:1.280448000},
{lat: 48.49167500, lng:1.280934000},
{lat: 48.49035400, lng:1.283659000},
{lat: 48.49018100, lng:1.283611000},
{lat: 48.48945400, lng:1.282941000},
{lat: 48.48907700, lng:1.282613000},
{lat: 48.48898800, lng:1.282757000},
{lat: 48.48858100, lng:1.284112000},
{lat: 48.48781200, lng:1.285077000},
{lat: 48.48357600, lng:1.291991000},
{lat: 48.48284400, lng:1.293757000},
{lat: 48.48210000, lng:1.296071000},
{lat: 48.48133300, lng:1.298456000},
{lat: 48.48070000, lng:1.300442000},
{lat: 48.48210500, lng:1.303945000},
{lat: 48.48232700, lng:1.304383000},
{lat: 48.48260400, lng:1.304940000},
{lat: 48.48271500, lng:1.305109000},
{lat: 48.48376900, lng:1.306829000},
{lat: 48.48389000, lng:1.307171000},
{lat: 48.48400100, lng:1.307774000},
{lat: 48.48396200, lng:1.307902000},
{lat: 48.48390500, lng:1.308278000},
{lat: 48.48289300, lng:1.310540000},
{lat: 48.48295800, lng:1.310930000},
{lat: 48.48301600, lng:1.311292000},
{lat: 48.48309900, lng:1.311756000},
{lat: 48.48295000, lng:1.311930000},
{lat: 48.48302500, lng:1.312129000},
{lat: 48.48471400, lng:1.318787000},
{lat: 48.48474500, lng:1.319986000},
{lat: 48.48472600, lng:1.320370000},
{lat: 48.48435800, lng:1.321725000},
{lat: 48.48392500, lng:1.323335000},
{lat: 48.48344100, lng:1.325167000},
{lat: 48.48305900, lng:1.326446000},
{lat: 48.48256400, lng:1.327796000},
{lat: 48.48238700, lng:1.328196000},
{lat: 48.48162000, lng:1.329104000},
{lat: 48.48158900, lng:1.329125000},
{lat: 48.48145600, lng:1.329223000},
{lat: 48.48137100, lng:1.329474000},
{lat: 48.47915500, lng:1.330387000},
{lat: 48.47917100, lng:1.330533000},
{lat: 48.47918400, lng:1.330908000},
{lat: 48.47916900, lng:1.331170000},
{lat: 48.47919700, lng:1.331931000},
{lat: 48.47921500, lng:1.332070000},
{lat: 48.47908400, lng:1.332307000},
{lat: 48.47891200, lng:1.332279000},
{lat: 48.47870800, lng:1.332277000},
{lat: 48.47691800, lng:1.331160000},
{lat: 48.47676400, lng:1.331064000},
{lat: 48.47670300, lng:1.330751000},
{lat: 48.47685600, lng:1.330647000},
{lat: 48.47691400, lng:1.330561000},
{lat: 48.47703800, lng:1.330336000},
{lat: 48.47700900, lng:1.329919000},
{lat: 48.47763000, lng:1.329017000},
{lat: 48.47800900, lng:1.328885000},
{lat: 48.47835900, lng:1.328835000},
{lat: 48.47868100, lng:1.328766000},
{lat: 48.47912200, lng:1.328692000},
{lat: 48.48010100, lng:1.327285000},
{lat: 48.48028000, lng:1.326681000},
{lat: 48.48035600, lng:1.326336000},
{lat: 48.48055300, lng:1.325629000},
{lat: 48.48085600, lng:1.324641000},
{lat: 48.48114000, lng:1.323521000},
{lat: 48.48108400, lng:1.323126000},
{lat: 48.48097700, lng:1.322984000},
{lat: 48.48025900, lng:1.322206000},
{lat: 48.48016500, lng:1.322045000},
{lat: 48.48076800, lng:1.319327000},
{lat: 48.48088100, lng:1.319096000},
{lat: 48.48106400, lng:1.318540000},
{lat: 48.48119400, lng:1.317915000},
{lat: 48.48120600, lng:1.317577000},
{lat: 48.48138300, lng:1.317076000},
{lat: 48.48150400, lng:1.317072000},
{lat: 48.48158800, lng:1.316961000},
{lat: 48.48148600, lng:1.316826000},
{lat: 48.47992300, lng:1.315913000},
{lat: 48.47991400, lng:1.316014000},
{lat: 48.47990200, lng:1.316180000},
{lat: 48.47978800, lng:1.316372000},
{lat: 48.47967200, lng:1.316402000},
{lat: 48.47956500, lng:1.316456000},
{lat: 48.47961100, lng:1.316263000},
{lat: 48.47977800, lng:1.316091000},
{lat: 48.47984700, lng:1.316268000},
{lat: 48.47971500, lng:1.316394000},
{lat: 48.47963300, lng:1.316429000},
{lat: 48.47955400, lng:1.316329000},
{lat: 48.47971300, lng:1.316219000},
{lat: 48.47970800, lng:1.316052000},
{lat: 48.47940800, lng:1.315936000},
{lat: 48.47929700, lng:1.316030000},
{lat: 48.47939100, lng:1.315903000},
{lat: 48.47978000, lng:1.315448000},
{lat: 48.47979900, lng:1.315424000},
{lat: 48.47971400, lng:1.315084000},
{lat: 48.47953400, lng:1.314812000},
{lat: 48.47882900, lng:1.314382000},
{lat: 48.47886200, lng:1.314446000},
{lat: 48.47891100, lng:1.314434000},
{lat: 48.47893000, lng:1.314395000},
{lat: 48.47883700, lng:1.314349000},
{lat: 48.47880200, lng:1.314394000},
{lat: 48.47882500, lng:1.314486000},
{lat: 48.47888000, lng:1.314469000},
{lat: 48.47890900, lng:1.314433000},
{lat: 48.47892400, lng:1.314270000},
{lat: 48.47884400, lng:1.314217000},
{lat: 48.47879300, lng:1.314249000},
{lat: 48.47879500, lng:1.314288000},
{lat: 48.47875600, lng:1.314355000},
{lat: 48.47884900, lng:1.314340000},
{lat: 48.47889300, lng:1.314392000},
{lat: 48.47891700, lng:1.314385000},
{lat: 48.47890700, lng:1.314399000},
{lat: 48.47893900, lng:1.314912000},
{lat: 48.47890000, lng:1.315263000},
{lat: 48.47899900, lng:1.315446000},
{lat: 48.47902800, lng:1.315442000},
{lat: 48.47893400, lng:1.315110000},
{lat: 48.47881300, lng:1.314343000},
{lat: 48.47883400, lng:1.314475000},
{lat: 48.47883900, lng:1.314340000},
{lat: 48.47882700, lng:1.314563000},
{lat: 48.47874700, lng:1.314744000},
{lat: 48.47872700, lng:1.314837000},
{lat: 48.47871600, lng:1.315050000},
{lat: 48.47855700, lng:1.314011000},
{lat: 48.47881000, lng:1.313653000},
{lat: 48.47872600, lng:1.313527000},
{lat: 48.47848100, lng:1.313563000},
{lat: 48.47823000, lng:1.313460000},
{lat: 48.47814200, lng:1.313381000},
{lat: 48.47793900, lng:1.313440000},
{lat: 48.47886800, lng:1.310488000},
{lat: 48.47922100, lng:1.310345000},
{lat: 48.47941400, lng:1.309826000},
{lat: 48.47956300, lng:1.309281000},
{lat: 48.47969500, lng:1.308578000},
{lat: 48.48302200, lng:1.311361000},
{lat: 48.48307000, lng:1.311704000},
{lat: 48.48297200, lng:1.311852000},
{lat: 48.48062800, lng:1.319778000},
{lat: 48.48058100, lng:1.319917000},
{lat: 48.48048500, lng:1.320289000},
{lat: 48.48040100, lng:1.320701000},
{lat: 48.47719800, lng:1.323257000},
{lat: 48.47723200, lng:1.323453000},
{lat: 48.47613300, lng:1.330747000},
{lat: 48.47652300, lng:1.330885000},
{lat: 48.48039200, lng:1.328262000},
{lat: 48.48032700, lng:1.328143000},
{lat: 48.48016100, lng:1.327446000},
{lat: 48.47942500, lng:1.315891000},
{lat: 48.47945500, lng:1.315832000},
{lat: 48.47893700, lng:1.314706000},
{lat: 48.48387300, lng:1.308342000},
{lat: 48.48374500, lng:1.308003000},
{lat: 48.48335400, lng:1.307769000},
{lat: 48.48277300, lng:1.307471000},
{lat: 48.47430900, lng:1.311680000},
{lat: 48.47395800, lng:1.311369000},
{lat: 48.47406100, lng:1.310841000},
{lat: 48.47418100, lng:1.310442000},
{lat: 48.47152900, lng:1.309302000},
{lat: 48.47128300, lng:1.310830000},
{lat: 48.47097300, lng:1.312245000},
{lat: 48.47094000, lng:1.312389000},
{lat: 48.47071000, lng:1.312281000},
{lat: 48.47030200, lng:1.311474000},
{lat: 48.46973700, lng:1.311019000},
{lat: 48.46972700, lng:1.310959000}];

  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 11,
    center: path[1],
    mapTypeId: 'terrain'
  });

  // Create an ElevationService.
  var elevator = new google.maps.ElevationService;

  // Draw the path, using the Visualization API and the Elevation service.
  displayPathElevation(path, elevator, map);
}

function displayPathElevation(path, elevator, map) {
  // Display a polyline of the elevation path.
  new google.maps.Polyline({
    path: path,
    strokeColor: '#0000CC',
    opacity: 0.4,
    map: map
  });

  // Create a PathElevationRequest object using this array.
  // Ask for 256 samples along that path.
  // Initiate the path request.
  elevator.getElevationAlongPath({
    'path': path,
    'samples': 512
  }, plotElevation);
}

// Takes an array of ElevationResult objects, draws the path on the map
// and plots the elevation profile on a Visualization API ColumnChart.
function plotElevation(elevations, status) {
  var chartDiv = document.getElementById('elevation_chart');
  if (status !== google.maps.ElevationStatus.OK) {
    // Show the error code inside the chartDiv.
    chartDiv.innerHTML = 'Cannot show elevation: request failed because ' +
        status;
    return;
  }
  // Create a new chart in the elevation_chart DIV.
  var chart = new google.visualization.ColumnChart(chartDiv);

  // Extract the data from which to populate the chart.
  // Because the samples are equidistant, the 'Sample'
  // column here does double duty as distance along the
  // X axis.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Sample');
  data.addColumn('number', 'Elevation');
  for (var i = 0; i < elevations.length; i++) {
    data.addRow(['', elevations[i].elevation]);
  }

  // Draw the chart using the data within its DIV.
  chart.draw(data, {
    height: 150,
    legend: 'none',
    titleY: 'Elevation (m)'
  });
}